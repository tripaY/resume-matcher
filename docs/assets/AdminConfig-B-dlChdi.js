import{d as w,r as V,x as I,c as T,o as D,a as y,e,g as n,w as l,k as p,s as k,C as x,_ as M,u as N,m as R,i as g}from"./index-CjC9TpiK.js";const U={class:"action-bar"},z={class:"dialog-footer"},j=w({__name:"ConfigTable",props:{type:{},data:{}},emits:["refresh"],setup(c,{emit:i}){const m=c,r=i,d=V(!1),o=V(""),t=I({id:0,name:""}),f=()=>{o.value="新增",t.id=0,t.name="",d.value=!0},b=s=>{o.value="编辑",t.id=s.id,t.name=s.name,d.value=!0},S=async()=>{if(!t.name)return;let s;t.id?s=(await k.updateDimension(m.type,t.id,t.name)).error:s=(await k.createDimension(m.type,t.name)).error,s?x.error("保存失败: "+s.message):(x.success("保存成功"),d.value=!1,r("refresh"))};return(s,a)=>{const _=n("el-button"),v=n("el-table-column"),$=n("el-table"),h=n("el-input"),A=n("el-form-item"),B=n("el-form"),E=n("el-dialog");return D(),T("div",null,[y("div",U,[e(_,{type:"primary",onClick:f},{default:l(()=>[...a[3]||(a[3]=[p("新增",-1)])]),_:1})]),e($,{data:c.data,border:"",style:{width:"100%"}},{default:l(()=>[e(v,{prop:"id",label:"ID",width:"80"}),e(v,{prop:"name",label:"名称"}),e(v,{label:"操作",width:"180"},{default:l(({row:u})=>[e(_,{size:"small",onClick:G=>b(u)},{default:l(()=>[...a[4]||(a[4]=[p("编辑",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(E,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=u=>d.value=u),title:o.value},{footer:l(()=>[y("span",z,[e(_,{onClick:a[1]||(a[1]=u=>d.value=!1)},{default:l(()=>[...a[5]||(a[5]=[p("取消",-1)])]),_:1}),e(_,{type:"primary",onClick:S},{default:l(()=>[...a[6]||(a[6]=[p("确定",-1)])]),_:1})])]),default:l(()=>[e(B,{model:t},{default:l(()=>[e(A,{label:"名称","label-width":"80px"},{default:l(()=>[e(h,{modelValue:t.name,"onUpdate:modelValue":a[0]||(a[0]=u=>t.name=u)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),C=M(j,[["__scopeId","data-v-ecbd351d"]]),q={class:"page-container"},F=w({__name:"AdminConfig",setup(c){const i=N(),m=V("industries"),r=()=>{i.fetchMeta()};return R(()=>{r()}),(d,o)=>{const t=n("el-tab-pane"),f=n("el-tabs");return D(),T("div",q,[o[1]||(o[1]=y("h2",null,"系统配置",-1)),e(f,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=b=>m.value=b)},{default:l(()=>[e(t,{label:"行业管理",name:"industries"},{default:l(()=>[e(C,{type:"industries",data:g(i).industries,onRefresh:r},null,8,["data"])]),_:1}),e(t,{label:"技能管理",name:"skills"},{default:l(()=>[e(C,{type:"skills",data:g(i).skills,onRefresh:r},null,8,["data"])]),_:1}),e(t,{label:"城市管理",name:"cities"},{default:l(()=>[e(C,{type:"cities",data:g(i).cities,onRefresh:r},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])])}}}),J=M(F,[["__scopeId","data-v-0116dcdb"]]);export{J as default};
