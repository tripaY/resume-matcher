import{d as w,r as k,x as U,c as D,o as T,a as x,e as t,g as o,w as l,k as f,s as y,A as _,_ as $,u as z,m as j,i as C}from"./index-riSBzU23.js";const q={class:"action-bar"},F={class:"dialog-footer"},G=w({__name:"ConfigTable",props:{type:{},data:{}},emits:["refresh"],setup(c,{emit:m}){const u=c,i=m,d=k(!1),s=k(""),a=U({id:0,name:""}),b=()=>{s.value="新增",a.id=0,a.name="",d.value=!0},v=n=>{s.value="编辑",a.id=n.id,a.name=n.name,d.value=!0},A=async n=>{const{error:e}=await y.deleteDimension(u.type,n);e?_.error("删除失败: "+e.message):(_.success("删除成功"),i("refresh"))},M=async()=>{if(!a.name)return;let n;a.id?n=(await y.updateDimension(u.type,a.id,a.name)).error:n=(await y.createDimension(u.type,a.name)).error,n?_.error("保存失败: "+n.message):(_.success("保存成功"),d.value=!1,i("refresh"))};return(n,e)=>{const p=o("el-button"),g=o("el-table-column"),S=o("el-popconfirm"),h=o("el-table"),B=o("el-input"),E=o("el-form-item"),I=o("el-form"),N=o("el-dialog");return T(),D("div",null,[x("div",q,[t(p,{type:"primary",onClick:b},{default:l(()=>[...e[3]||(e[3]=[f("新增",-1)])]),_:1})]),t(h,{data:c.data,border:"",style:{width:"100%"}},{default:l(()=>[t(g,{prop:"id",label:"ID",width:"80"}),t(g,{prop:"name",label:"名称"}),t(g,{label:"操作",width:"180"},{default:l(({row:r})=>[t(p,{size:"small",onClick:R=>v(r)},{default:l(()=>[...e[4]||(e[4]=[f("编辑",-1)])]),_:1},8,["onClick"]),t(S,{title:"确定删除吗？",onConfirm:R=>A(r.id)},{reference:l(()=>[t(p,{size:"small",type:"danger"},{default:l(()=>[...e[5]||(e[5]=[f("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"]),t(N,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=r=>d.value=r),title:s.value},{footer:l(()=>[x("span",F,[t(p,{onClick:e[1]||(e[1]=r=>d.value=!1)},{default:l(()=>[...e[6]||(e[6]=[f("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:M},{default:l(()=>[...e[7]||(e[7]=[f("确定",-1)])]),_:1})])]),default:l(()=>[t(I,{model:a},{default:l(()=>[t(E,{label:"名称","label-width":"80px"},{default:l(()=>[t(B,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=r=>a.name=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),V=$(G,[["__scopeId","data-v-b413acff"]]),H={class:"page-container"},J=w({__name:"AdminConfig",setup(c){const m=z(),u=k("industries"),i=()=>{m.fetchMeta()};return j(()=>{i()}),(d,s)=>{const a=o("el-tab-pane"),b=o("el-tabs");return T(),D("div",H,[s[1]||(s[1]=x("h2",null,"系统配置",-1)),t(b,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=v=>u.value=v)},{default:l(()=>[t(a,{label:"行业管理",name:"industries"},{default:l(()=>[t(V,{type:"industries",data:C(m).industries,onRefresh:i},null,8,["data"])]),_:1}),t(a,{label:"技能管理",name:"skills"},{default:l(()=>[t(V,{type:"skills",data:C(m).skills,onRefresh:i},null,8,["data"])]),_:1}),t(a,{label:"城市管理",name:"cities"},{default:l(()=>[t(V,{type:"cities",data:C(m).cities,onRefresh:i},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])])}}}),L=$(J,[["__scopeId","data-v-0116dcdb"]]);export{L as default};
