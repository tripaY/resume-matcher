import{d as $,u as O,r as y,x as R,m as T,c as d,a as N,n as A,e as a,w as t,g as u,p as G,y as m,s as H,o as n,F as f,z as b,i as w,k as p,t as k,b as K,h as Q,_ as W}from"./index-riSBzU23.js";const X={class:"page-container"},Y={class:"filter-bar"},Z={key:0},ee={class:"pagination"},le=$({__name:"JobList",setup(ae){const j=Q(),c=O(),C=y(!1),x=y([]),D=y(0),_=y(1),V=y(20),o=R({city:"",level:"",skill:"",industry:"",degree:"",min_years:void 0}),h=async()=>{C.value=!0;try{const r={...o,page:_.value,pageSize:V.value};Object.keys(r).forEach(s=>{(r[s]===""||r[s]===void 0)&&delete r[s]});const l=await H.getJobs(r);if(l.error){console.error(l.error);return}x.value=l.data.items,D.value=l.data.total}catch(r){console.error(r)}finally{C.value=!1}},U=()=>{_.value=1,h()},F=()=>{o.city="",o.level="",o.skill="",o.industry="",o.degree="",o.min_years=void 0,U()},J=r=>{_.value=r,h()},L=r=>{V.value=r,_.value=1,h()},M=r=>{j.push(`/jobs/${r}`)};return T(()=>{c.fetchMeta(),h()}),(r,l)=>{const s=u("el-option"),g=u("el-select"),v=u("el-form-item"),z=u("el-button"),P=u("el-form"),i=u("el-table-column"),B=u("el-tag"),q=u("el-table"),E=u("el-pagination"),I=G("loading");return n(),d("div",X,[N("div",Y,[a(P,{inline:!0,model:o,class:"demo-form-inline"},{default:t(()=>[a(v,{label:"城市"},{default:t(()=>[a(g,{modelValue:o.city,"onUpdate:modelValue":l[0]||(l[0]=e=>o.city=e),placeholder:"选择城市",clearable:""},{default:t(()=>[(n(!0),d(f,null,b(w(c).cities,e=>(n(),m(s,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"职级"},{default:t(()=>[a(g,{modelValue:o.level,"onUpdate:modelValue":l[1]||(l[1]=e=>o.level=e),placeholder:"选择职级",clearable:""},{default:t(()=>[(n(!0),d(f,null,b(w(c).levels,e=>(n(),m(s,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"技能"},{default:t(()=>[a(g,{modelValue:o.skill,"onUpdate:modelValue":l[2]||(l[2]=e=>o.skill=e),placeholder:"要求技能",clearable:""},{default:t(()=>[(n(!0),d(f,null,b(w(c).skills,e=>(n(),m(s,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"行业"},{default:t(()=>[a(g,{modelValue:o.industry,"onUpdate:modelValue":l[3]||(l[3]=e=>o.industry=e),placeholder:"所属行业",clearable:""},{default:t(()=>[(n(!0),d(f,null,b(w(c).industries,e=>(n(),m(s,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"学历要求"},{default:t(()=>[a(g,{modelValue:o.degree,"onUpdate:modelValue":l[4]||(l[4]=e=>o.degree=e),placeholder:"学历要求",clearable:""},{default:t(()=>[(n(!0),d(f,null,b(w(c).degrees,e=>(n(),m(s,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,null,{default:t(()=>[a(z,{type:"primary",onClick:U},{default:t(()=>[...l[7]||(l[7]=[p("筛选",-1)])]),_:1}),a(z,{onClick:F},{default:t(()=>[...l[8]||(l[8]=[p("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),A((n(),m(q,{data:x.value,style:{width:"100%"},stripe:""},{default:t(()=>[a(i,{prop:"id",label:"ID",width:"80"}),a(i,{prop:"title",label:"职位名称",width:"180"}),a(i,{prop:"city",label:"城市",width:"100"}),a(i,{prop:"min_years",label:"最低年限",width:"100"},{default:t(e=>[p(k(e.row.min_years)+"年 ",1)]),_:1}),a(i,{prop:"level",label:"职级",width:"100"},{default:t(e=>[a(B,{type:"success"},{default:t(()=>[p(k(e.row.level),1)]),_:2},1024)]),_:1}),a(i,{label:"薪资范围",width:"150"},{default:t(e=>[p(k(e.row.salary_min)+" - "+k(e.row.salary_max),1)]),_:1}),a(i,{label:"必需技能","min-width":"200"},{default:t(e=>[(n(!0),d(f,null,b(e.row.required_skills.slice(0,3),S=>(n(),m(B,{key:S,size:"small",class:"mr-1",type:"warning"},{default:t(()=>[p(k(S),1)]),_:2},1024))),128)),e.row.required_skills.length>3?(n(),d("span",Z,"...")):K("",!0)]),_:1}),a(i,{label:"操作",width:"150",fixed:"right"},{default:t(e=>[a(z,{type:"primary",size:"small",onClick:S=>M(e.row.id)},{default:t(()=>[...l[9]||(l[9]=[p(" 查看详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,C.value]]),N("div",ee,[a(E,{"current-page":_.value,"onUpdate:currentPage":l[5]||(l[5]=e=>_.value=e),"page-size":V.value,"onUpdate:pageSize":l[6]||(l[6]=e=>V.value=e),"page-sizes":[5,10,20],total:D.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:L,onCurrentChange:J},null,8,["current-page","page-size","total"])])])}}}),oe=W(le,[["__scopeId","data-v-d7284239"]]);export{oe as default};
