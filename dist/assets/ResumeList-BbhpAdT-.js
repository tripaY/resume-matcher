import{d as O,u as T,r as y,x as q,m as A,c as m,a as N,n as G,e as l,w as t,g as u,p as H,y as _,s as J,o,F as c,z as v,i as V,k as f,t as C,b as K,h as Q,_ as W}from"./index-riSBzU23.js";const X={class:"page-container"},Y={class:"filter-bar"},Z={key:0},ee={class:"pagination"},le=O({__name:"ResumeList",setup(ae){const R=Q(),b=T(),k=y(!1),z=y([]),D=y(0),g=y(1),S=y(20),n=q({city:"",level:"",skill:"",industry:"",degree:"",min_years:0}),w=async()=>{k.value=!0;const r={page:g.value,pageSize:S.value,...n};Object.keys(r).forEach(s=>{(r[s]===""||r[s]===0||r[s]===void 0)&&delete r[s]});const{data:a,error:d}=await J.getResumes(r);d?console.error(d):(z.value=a.items,D.value=a.total),k.value=!1},U=()=>{g.value=1,w()},F=()=>{n.city="",n.level="",n.skill="",n.industry="",n.degree="",n.min_years=0,U()},L=r=>{g.value=r,w()},P=r=>{R.push(`/resumes/${r}`)};return A(()=>{w()}),(r,a)=>{const d=u("el-option"),s=u("el-select"),p=u("el-form-item"),E=u("el-input-number"),x=u("el-button"),I=u("el-form"),i=u("el-table-column"),B=u("el-tag"),M=u("el-table"),$=u("el-pagination"),j=H("loading");return o(),m("div",X,[N("div",Y,[l(I,{inline:!0,model:n,class:"demo-form-inline"},{default:t(()=>[l(p,{label:"城市"},{default:t(()=>[l(s,{modelValue:n.city,"onUpdate:modelValue":a[0]||(a[0]=e=>n.city=e),placeholder:"选择城市",clearable:""},{default:t(()=>[(o(!0),m(c,null,v(V(b).cities,e=>(o(),_(d,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"职级"},{default:t(()=>[l(s,{modelValue:n.level,"onUpdate:modelValue":a[1]||(a[1]=e=>n.level=e),placeholder:"选择职级",clearable:""},{default:t(()=>[(o(!0),m(c,null,v(V(b).levels,e=>(o(),_(d,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"技能"},{default:t(()=>[l(s,{modelValue:n.skill,"onUpdate:modelValue":a[2]||(a[2]=e=>n.skill=e),placeholder:"具备技能",clearable:""},{default:t(()=>[(o(!0),m(c,null,v(V(b).skills,e=>(o(),_(d,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"行业"},{default:t(()=>[l(s,{modelValue:n.industry,"onUpdate:modelValue":a[3]||(a[3]=e=>n.industry=e),placeholder:"行业背景",clearable:""},{default:t(()=>[(o(!0),m(c,null,v(V(b).industries,e=>(o(),_(d,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"学历"},{default:t(()=>[l(s,{modelValue:n.degree,"onUpdate:modelValue":a[4]||(a[4]=e=>n.degree=e),placeholder:"最低学历",clearable:""},{default:t(()=>[(o(!0),m(c,null,v(V(b).degrees,e=>(o(),_(d,{key:e.id,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"最低年限"},{default:t(()=>[l(E,{modelValue:n.min_years,"onUpdate:modelValue":a[5]||(a[5]=e=>n.min_years=e),min:0,max:20},null,8,["modelValue"])]),_:1}),l(p,null,{default:t(()=>[l(x,{type:"primary",onClick:U},{default:t(()=>[...a[7]||(a[7]=[f("筛选",-1)])]),_:1}),l(x,{onClick:F},{default:t(()=>[...a[8]||(a[8]=[f("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),G((o(),_(M,{data:z.value,style:{width:"100%"},stripe:""},{default:t(()=>[l(i,{prop:"id",label:"ID",width:"80"}),l(i,{prop:"candidate_name",label:"姓名",width:"120"}),l(i,{prop:"gender",label:"性别",width:"80"}),l(i,{prop:"expected_city",label:"期望城市",width:"100"}),l(i,{prop:"years_of_experience",label:"年限",width:"80"},{default:t(e=>[f(C(e.row.years_of_experience)+"年 ",1)]),_:1}),l(i,{prop:"current_level",label:"当前职级",width:"100"},{default:t(e=>[l(B,null,{default:t(()=>[f(C(e.row.current_level),1)]),_:2},1024)]),_:1}),l(i,{label:"技能","min-width":"200"},{default:t(e=>[(o(!0),m(c,null,v(e.row.skills.slice(0,3),h=>(o(),_(B,{key:h,size:"small",class:"mr-1"},{default:t(()=>[f(C(h),1)]),_:2},1024))),128)),e.row.skills.length>3?(o(),m("span",Z,"...")):K("",!0)]),_:1}),l(i,{label:"操作",width:"150",fixed:"right"},{default:t(e=>[l(x,{type:"primary",size:"small",onClick:h=>P(e.row.id)},{default:t(()=>[...a[9]||(a[9]=[f(" 详情 & 匹配 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,k.value]]),N("div",ee,[l($,{"current-page":g.value,"onUpdate:currentPage":a[6]||(a[6]=e=>g.value=e),"page-size":S.value,total:D.value,layout:"total, prev, pager, next",onCurrentChange:L},null,8,["current-page","page-size","total"])])])}}}),ne=W(le,[["__scopeId","data-v-67582460"]]);export{ne as default};
